[{"title":"建站记录","date":"2017-12-20T11:42:49.000Z","path":"2017/12/20/建站记录/","text":"初衷记录成长的点点滴滴，给自己更多的思考时间！","tags":[{"name":"随笔","slug":"随笔","permalink":"https://geniuslight.github.io/tags/随笔/"}]},{"title":"登陆远程服务器桌面","date":"2017-12-20T08:19:34.000Z","path":"2017/12/20/登陆远程服务器桌面/","text":"解决方案 序号 方案 简单区别 方案一 Xmanager 1.VNC连接时及时突然中断（比如断网），不影响操作进行；2.不需要在服务器上装软件，需要在你的电脑上装相应软件，使用SSH协议；3.正版要钱 方案二 VNC(Virtual Network Computing) 1.本地操作突然中断，服务器端操作也中断；2.在服务器端装vncserver（有很多版本选择）,你的电脑装vncviewer客户端(有很多软件选择)；3.不要钱 VCN安装和配置vncserver和vncviewr选择有很多，我选择采用vnc4server + VNC Viewer 在服务器安装操作系统：Ubuntu16.04 Desktop 选择安装桌面和修改vnc相应配置，个人尝试安装了gnome和xface4 1.安装gnome 执行apt-get install vnc4server，安装vnc server 执行vncserver，按照提示设置VNC访问时的密码 执行apt-get install gnome-panel gnome-settings-daemon metacity nautilus gnome-terminal，安装gnome窗口管理器 需要修改.vnc/xstartup配置文件。修改为下面的样子： 123456789101112#!/bin/shexport XKL_XMODMAP_DISABLE=1unset SESSION_MANAGERunset DBUS_SESSION_BUS_ADDRESSgnome-panel &amp;gnome-settings-daemon &amp;metacity &amp;nautilus &amp;gnome-terminal &amp;vncconfig &amp; 执行apt-get install vnc4server，安装vnc server 执行vncserver --geometry 1920×1080 :1，再次启动vnc server，其中1920X1080是屏幕分辨率，可自行修改thEast) 远程运行vnc的客户端（如：VNC Viewer）: IP地址+VNC端口（如：192.168.1.188：1） 效果如下（桌面崩溃了，网上找的效果图）： 崩溃的桌面 2.安装xfce4 执行apt-get install vnc4server，安装vnc server 执行vncserver，按照提示设置VNC访问时的密码 执行sudo apt-get install xfce4，安装xfce4桌面环境 需要修改.vnc/xstartup配置文件。修改为下面的样子： 123456789101112131415#!/bin/sh# Uncomment the following two lines for normal desktop:# unset SESSION_MANAGER# exec /etc/X11/xinit/xinitrc[ -x /etc/vnc/xstartup ] &amp;&amp; exec /etc/vnc/xstartup[ -r $HOME/.Xresources ] &amp;&amp; xrdb $HOME/.Xresourcesxsetroot -solid greyvncconfig -iconic &amp;x-terminal-emulator -geometry 80x24+10+10 -ls -title \"$VNCDESKTOP Desktop\" &amp;#x-window-manager &amp;sesion-manager &amp; xfdesktop &amp; xfce4-panel &amp;xfce4-menu-plugin &amp;xfsettingsd &amp;xfconfd &amp;xfwm4 &amp; 执行sudo update-alternatives --config x-terminal-emulator，选择“/usr/bin/xterm”项或者“/usr/bin/xfce4-terminal.wrapper”，配置模拟终端,否则登录后无法启动终端 执行vncserver - -geometry 1920×1080 :1，再次启动vnc server，其中1920X1080是屏幕分辨率，可自行修改 远程运行vnc的客户端（如：VNC Viewer）: IP地址+VNC端口（如：192.168.1.188：1） 效果如下： 这里写图片描述 遇到问题1安装gnome系统崩溃，再次登陆表现为：菜单无法显示，终端无法打开，新开用户可以重新打开终端，但是菜单任无法显示，所以采用xfce桌面。网上称vnc4server对gnome桌面支持有bug。 推荐直接使用安装xfce4并且修改相应配置 2 安装xfce后无法使用tab键在终端中自动补齐，原因是快捷键冲突。 解决方法： 菜单栏 → 设置 → 窗口设置 。打开窗口设置对话框 在窗口管理器中选择快捷键选项卡（Key） → Switch window for same application 将冲突快捷键清空，关闭窗口管理器 参考： 在ubuntu16.04.1-desktop(amd64)上设置VNC ubuntu16.04 vncserver配置 在VNC中Xfce4中Tab键失效的解决方法 ​","tags":[{"name":"Linux","slug":"Linux","permalink":"https://geniuslight.github.io/tags/Linux/"},{"name":"运维","slug":"运维","permalink":"https://geniuslight.github.io/tags/运维/"}]},{"title":"Linux系统换源","date":"2017-12-20T08:19:34.000Z","path":"2017/12/20/Linux系统换源/","text":"Linux系统换源[TOC] linux界两大主流：RPM和DPKGLinux 开发商先在固定的硬件平台与操作系统平台上面将需要安装或升级的软件编译好， 然后将这个软件的所有相关文件打包成为一个特殊格式的文件，在这个软件文件内还包含了预先侦测系统与相依软件的脚本， 并提供记载该软件提供的所有文件资讯等。最终将这个软件文件释出。用户端取得这个文件后，只要透过特定的命令来安装， 那么该软件文件就会依照内部的脚本来侦测相依的前驱软件是否存在，若安装的环境符合需求，那就会开始安装， 安装完成后还会将该软件的资讯写入软件管理机制中，以达成未来可以进行升级、移除等动作。 目前在 Linux 界软件安装方式最常见的有两种，分别是： DPKG：这个机制最早是由 Debian Linux 社群所开发出来的，透过 dpkg 的机制， Debian 提供的软件就能够简单的安装起来，同时还能提供安装后的软件资讯，实在非常不错。 只要是衍生於 Debian 的其他 Linux distributions 大多使用 dpkg 这个机制来管理软件的， 包括 B2D, Ubuntu 等等。 RPM：这个机制最早是由 Red Hat 这家公司开发出来的，后来实在很好用，因此很多 distributions 就使用这个机制来作为软件安装的管理方式。包括 Fedora, CentOS, SuSE 等等知名的开发商都是用这。 目前新的 Linux 开发商都有提供『线上升级』机制，透过这个机制， 原版光盘就只有第一次安装时需要用到而已，其他时候只要有网络，你就能够取得原本开发商所提供的任何软件了呢！ 在 dpkg 管理机制上就开发出 APT 的线上升级机制，RPM 则依开发商的不同，有 Red Hat 系统的 yum ， SuSE 系统的 Yast Online Update (YOU)。 distribution 代表 软件管理机制 使用命令 线上升级机制(命令) Red Hat/Fedora RPM rpm, rpmbuild YUM (yum) Debian/Ubuntu DPKG dpkg APT (apt-get) Linux换源因为在线安装需要在服务器上下载需要软件和依赖关系文件，所以下载的速度很影响使用体验。一般来说，Linux默认的源安装和更新速度很慢，所以安装好系统一般会选择换源。 个人常用的源： 清华源 163源 举例在Ubuntu16.04和Centos7上如何换源 在Ubuntu上更换清华源：Ubuntu 16.04的软件源配置文件是 /etc/apt/sources.list。将系统自带的该文件做个备份，将该文件替换为下面内容，即可使用 TUNA 的软件源镜像。(其他版本sourcelist 参看 网页) 先备份在编辑 12mv /etc/apt/sources.list /etc/apt/sources.list.bakupsudo vim /etc/apt/sources.list 12345678910111213# 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial main restricted universe multiverse# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial main restricted universe multiversedeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-updates main restricted universe multiverse# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-updates main restricted universe multiversedeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-backports main restricted universe multiverse# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-backports main restricted universe multiversedeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-security main restricted universe multiverse# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-security main restricted universe multiverse# 预发布软件源，不建议启用# deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-proposed main restricted universe multiverse# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-proposed main restricted universe multiverse 访问源列表里的每个网址，并读取软件列表，然后保存在本地电脑。使用update命令更新。 1sudo apt-get update 在Centos上更换163源Centos7的源文件是/etc/yum.repos.d/CentOS-Base.repo。同理先备份，然后再替换文件即可。 首先备份 1mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup 再下载Centos，并且将其改成默认源文件。 12wget http://mirrors.163.com/.help/CentOS7-Base-163.repomv CentOS7-Base-163.repo /etc/yum.repos.d/CentOS-Base.repo 运行命令生成缓存 12yum clean allyum makecache 关于update和upgrade在Ubuntu下 sudo apt-get update 这个命令，会访问源列表里的每个网址，并读取软件列表，然后保存在本地电脑。我们在新立得软件包管理器里看到的软件列表，都是通过update命令更新的。 sudo apt-get upgrade 这个命令，会把本地已安装的软件，与刚下载的软件列表里对应软件进行对比，如果发现已安装的软件版本太低，就会提示你更新。如果源里面有系统更新，直接给你把系统升级。有网友表示会导致原来软件无法使用。 在Centos下 yum makecache 等同于 sudo apt-get update yum -y update 升级所有包，改变软件设置和系统设置,系统版本内核都升级。 yum -y upgrade 升级所有包，不改变软件设置和系统设置，系统版本升级，内核不改变。 参考： 鸟哥的Linux私房菜 ubuntu sudo update与upgrade的作用及区别","tags":[{"name":"Linux","slug":"Linux","permalink":"https://geniuslight.github.io/tags/Linux/"},{"name":"运维","slug":"运维","permalink":"https://geniuslight.github.io/tags/运维/"}]}]