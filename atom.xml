<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>回忆积木小屋</title>
  
  <subtitle>多一点时间多一点爱</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://geniuslight.github.io/"/>
  <updated>2017-12-20T11:44:49.648Z</updated>
  <id>https://geniuslight.github.io/</id>
  
  <author>
    <name>light</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>建站记录</title>
    <link href="https://geniuslight.github.io/2017/12/20/%E5%BB%BA%E7%AB%99%E8%AE%B0%E5%BD%95/"/>
    <id>https://geniuslight.github.io/2017/12/20/建站记录/</id>
    <published>2017-12-20T11:42:49.000Z</published>
    <updated>2017-12-20T11:44:49.648Z</updated>
    
    <content type="html"><![CDATA[<h1 id="初衷"><a href="#初衷" class="headerlink" title="初衷"></a>初衷</h1><p>记录成长的点点滴滴，给自己更多的思考时间！</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;初衷&quot;&gt;&lt;a href=&quot;#初衷&quot; class=&quot;headerlink&quot; title=&quot;初衷&quot;&gt;&lt;/a&gt;初衷&lt;/h1&gt;&lt;p&gt;记录成长的点点滴滴，给自己更多的思考时间！&lt;/p&gt;

      
    
    </summary>
    
      <category term="随笔" scheme="https://geniuslight.github.io/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="随笔" scheme="https://geniuslight.github.io/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>Linux系统换源</title>
    <link href="https://geniuslight.github.io/2017/12/20/Linux%E7%B3%BB%E7%BB%9F%E6%8D%A2%E6%BA%90/"/>
    <id>https://geniuslight.github.io/2017/12/20/Linux系统换源/</id>
    <published>2017-12-20T08:19:34.000Z</published>
    <updated>2017-12-24T15:18:11.910Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Linux系统换源"><a href="#Linux系统换源" class="headerlink" title="Linux系统换源"></a>Linux系统换源</h1><p>[TOC]</p><h2 id="linux界两大主流：RPM和DPKG"><a href="#linux界两大主流：RPM和DPKG" class="headerlink" title="linux界两大主流：RPM和DPKG"></a>linux界两大主流：RPM和DPKG</h2><p>Linux 开发商先在固定的硬件平台与操作系统平台上面将需要安装或升级的软件编译好， 然后将这个软件的所有相关文件打包成为一个特殊格式的文件，在这个软件文件内还包含了预先侦测系统与相依软件的脚本， 并提供记载该软件提供的所有文件资讯等。最终将这个软件文件释出。用户端取得这个文件后，只要透过特定的命令来安装， 那么该软件文件就会依照内部的脚本来侦测相依的前驱软件是否存在，若安装的环境符合需求，那就会开始安装， 安装完成后还会将该软件的资讯写入软件管理机制中，以达成未来可以进行升级、移除等动作。</p><p>目前在 Linux 界软件安装方式最常见的有两种，分别是：</p><ul><li>DPKG：<br>这个机制最早是由 Debian Linux 社群所开发出来的，透过 dpkg 的机制， Debian 提供的软件就能够简单的安装起来，同时还能提供安装后的软件资讯，实在非常不错。 只要是衍生於 Debian 的其他 Linux distributions 大多使用 dpkg 这个机制来管理软件的， 包括 B2D, Ubuntu 等等。</li><li>RPM：<br>这个机制最早是由 Red Hat 这家公司开发出来的，后来实在很好用，因此很多 distributions 就使用这个机制来作为软件安装的管理方式。包括 Fedora, CentOS, SuSE 等等知名的开发商都是用这。</li></ul><p>目前新的 Linux 开发商都有提供『线上升级』机制，透过这个机制， 原版光盘就只有第一次安装时需要用到而已，其他时候只要有网络，你就能够取得原本开发商所提供的任何软件了呢！ 在 dpkg 管理机制上就开发出 APT 的线上升级机制，RPM 则依开发商的不同，有 Red Hat 系统的 yum ， SuSE 系统的 Yast Online Update (YOU)。</p><table><thead><tr><th>distribution 代表</th><th style="text-align:center">软件管理机制</th><th style="text-align:center">使用命令</th><th style="text-align:center">线上升级机制(命令)</th></tr></thead><tbody><tr><td>Red Hat/Fedora</td><td style="text-align:center">RPM</td><td style="text-align:center">rpm, rpmbuild</td><td style="text-align:center">YUM (yum)</td></tr><tr><td>Debian/Ubuntu</td><td style="text-align:center">DPKG</td><td style="text-align:center">dpkg</td><td style="text-align:center">APT (apt-get)</td></tr></tbody></table><h2 id="Linux换源"><a href="#Linux换源" class="headerlink" title="Linux换源"></a>Linux换源</h2><p>因为在线安装需要在服务器上下载需要软件和依赖关系文件，所以下载的速度很影响使用体验。一般来说，Linux默认的源安装和更新速度很慢，所以安装好系统一般会选择换源。</p><p>个人常用的源：</p><p><a href="https://mirrors.tuna.tsinghua.edu.cn/" target="_blank" rel="noopener">清华源</a></p><p><a href="http://mirrors.163.com/" target="_blank" rel="noopener">163源</a></p><p>举例在Ubuntu16.04和Centos7上如何换源</p><h3 id="在Ubuntu上更换清华源："><a href="#在Ubuntu上更换清华源：" class="headerlink" title="在Ubuntu上更换清华源："></a>在Ubuntu上更换清华源：</h3><p>Ubuntu 16.04的软件源配置文件是 <code>/etc/apt/sources.list</code>。将系统自带的该文件做个备份，将该文件替换为下面内容，即可使用 TUNA 的软件源镜像。(其他版本sourcelist 参看 <a href="https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/" target="_blank" rel="noopener">网页</a>)</p><p>先备份在编辑</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mv /etc/apt/sources<span class="selector-class">.list</span> /etc/apt/sources<span class="selector-class">.list</span><span class="selector-class">.bakup</span></span><br><span class="line">sudo vim /etc/apt/sources.list</span><br></pre></td></tr></table></figure><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 默认注释了源码镜像以提高 apt <span class="keyword">update</span> 速度，如有需要可自行取消注释</span><br><span class="line"><span class="keyword">deb</span> http<span class="variable">s:</span>//mirrors.tuna.tsinghua.edu.<span class="keyword">cn</span>/ubuntu/ xenial main restricted universe multiverse</span><br><span class="line"># <span class="keyword">deb</span>-src http<span class="variable">s:</span>//mirrors.tuna.tsinghua.edu.<span class="keyword">cn</span>/ubuntu/ xenial main restricted universe multiverse</span><br><span class="line"><span class="keyword">deb</span> http<span class="variable">s:</span>//mirrors.tuna.tsinghua.edu.<span class="keyword">cn</span>/ubuntu/ xenial-updates main restricted universe multiverse</span><br><span class="line"># <span class="keyword">deb</span>-src http<span class="variable">s:</span>//mirrors.tuna.tsinghua.edu.<span class="keyword">cn</span>/ubuntu/ xenial-updates main restricted universe multiverse</span><br><span class="line"><span class="keyword">deb</span> http<span class="variable">s:</span>//mirrors.tuna.tsinghua.edu.<span class="keyword">cn</span>/ubuntu/ xenial-backports main restricted universe multiverse</span><br><span class="line"># <span class="keyword">deb</span>-src http<span class="variable">s:</span>//mirrors.tuna.tsinghua.edu.<span class="keyword">cn</span>/ubuntu/ xenial-backports main restricted universe multiverse</span><br><span class="line"><span class="keyword">deb</span> http<span class="variable">s:</span>//mirrors.tuna.tsinghua.edu.<span class="keyword">cn</span>/ubuntu/ xenial-security main restricted universe multiverse</span><br><span class="line"># <span class="keyword">deb</span>-src http<span class="variable">s:</span>//mirrors.tuna.tsinghua.edu.<span class="keyword">cn</span>/ubuntu/ xenial-security main restricted universe multiverse</span><br><span class="line"></span><br><span class="line"># 预发布软件源，不建议启用</span><br><span class="line"># <span class="keyword">deb</span> http<span class="variable">s:</span>//mirrors.tuna.tsinghua.edu.<span class="keyword">cn</span>/ubuntu/ xenial-proposed main restricted universe multiverse</span><br><span class="line"># <span class="keyword">deb</span>-src http<span class="variable">s:</span>//mirrors.tuna.tsinghua.edu.<span class="keyword">cn</span>/ubuntu/ xenial-proposed main restricted universe multiverse</span><br></pre></td></tr></table></figure><p>访问源列表里的每个网址，并读取软件列表，然后保存在本地电脑。使用update命令更新。</p><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> <span class="keyword">update</span></span><br></pre></td></tr></table></figure><h3 id="在Centos上更换163源"><a href="#在Centos上更换163源" class="headerlink" title="在Centos上更换163源"></a>在Centos上更换163源</h3><p>Centos7的源文件是/etc/yum.repos.d/CentOS-Base.repo。同理先备份，然后再替换文件即可。</p><p>首先备份</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv /etc/yum<span class="selector-class">.repos</span><span class="selector-class">.d</span>/CentOS-Base<span class="selector-class">.repo</span> /etc/yum<span class="selector-class">.repos</span><span class="selector-class">.d</span>/CentOS-Base<span class="selector-class">.repo</span><span class="selector-class">.backup</span></span><br></pre></td></tr></table></figure><p>再下载Centos，并且将其改成默认源文件。</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget http:<span class="comment">//mirrors.163.com/.help/CentOS7-Base-163.repo</span></span><br><span class="line">mv CentOS7-Base-<span class="number">163</span><span class="selector-class">.repo</span> /etc/yum<span class="selector-class">.repos</span><span class="selector-class">.d</span>/CentOS-Base.repo</span><br></pre></td></tr></table></figure><p>运行命令生成缓存</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum clean <span class="keyword">all</span></span><br><span class="line">yum makecache</span><br></pre></td></tr></table></figure><h2 id="关于update和upgrade"><a href="#关于update和upgrade" class="headerlink" title="关于update和upgrade"></a>关于update和upgrade</h2><p>在Ubuntu下</p><p><code>sudo apt-get update</code></p><p>这个命令，会访问源列表里的每个网址，并读取软件列表，然后保存在本地电脑。我们在新立得软件包管理器里看到的软件列表，都是通过update命令更新的。</p><p><code>sudo apt-get upgrade</code></p><p>这个命令，会把本地已安装的软件，与刚下载的软件列表里对应软件进行对比，如果发现已安装的软件版本太低，就会提示你更新。如果源里面有系统更新，直接给你把系统升级。有网友表示会导致原来软件无法使用。</p><p>在Centos下</p><p><code>yum makecache</code> </p><p>等同于 <code>sudo apt-get update</code></p><p><code>yum -y update</code></p><p>升级所有包，改变软件设置和系统设置,系统版本内核都升级。</p><p><code>yum -y upgrade</code></p><p>升级所有包，不改变软件设置和系统设置，系统版本升级，内核不改变。</p><p>参考：</p><p><a href="http://cn.linux.vbird.org/linux_basic/0520rpm_and_srpm_4.php" target="_blank" rel="noopener">鸟哥的Linux私房菜</a></p><p><a href="http://www.baiyuxiong.com/?p=529" target="_blank" rel="noopener">ubuntu sudo update与upgrade的作用及区别</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Linux系统换源&quot;&gt;&lt;a href=&quot;#Linux系统换源&quot; class=&quot;headerlink&quot; title=&quot;Linux系统换源&quot;&gt;&lt;/a&gt;Linux系统换源&lt;/h1&gt;&lt;p&gt;[TOC]&lt;/p&gt;
&lt;h2 id=&quot;linux界两大主流：RPM和DPKG&quot;&gt;&lt;a 
      
    
    </summary>
    
      <category term="服务器运维" scheme="https://geniuslight.github.io/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%90%E7%BB%B4/"/>
    
    
      <category term="Linux" scheme="https://geniuslight.github.io/tags/Linux/"/>
    
      <category term="运维" scheme="https://geniuslight.github.io/tags/%E8%BF%90%E7%BB%B4/"/>
    
  </entry>
  
  <entry>
    <title>登陆远程服务器桌面</title>
    <link href="https://geniuslight.github.io/2017/12/20/%E7%99%BB%E9%99%86%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%A1%8C%E9%9D%A2/"/>
    <id>https://geniuslight.github.io/2017/12/20/登陆远程服务器桌面/</id>
    <published>2017-12-20T08:19:34.000Z</published>
    <updated>2017-12-24T15:17:59.981Z</updated>
    
    <content type="html"><![CDATA[<h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><table><thead><tr><th style="text-align:center">序号</th><th style="text-align:center">方案</th><th style="text-align:center">简单区别</th></tr></thead><tbody><tr><td style="text-align:center">方案一</td><td style="text-align:center">Xmanager</td><td style="text-align:center">1.VNC连接时及时突然中断（比如断网），不影响操作进行；2.不需要在服务器上装软件，需要在你的电脑上装相应软件，使用SSH协议；3.正版要钱</td></tr><tr><td style="text-align:center">方案二</td><td style="text-align:center">VNC(Virtual Network Computing)</td><td style="text-align:center">1.本地操作突然中断，服务器端操作也中断；2.在服务器端装vncserver（有很多版本选择）,你的电脑装vncviewer客户端(有很多软件选择)；3.不要钱</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"></td></tr></tbody></table><h1 id="VCN安装和配置"><a href="#VCN安装和配置" class="headerlink" title="VCN安装和配置"></a>VCN安装和配置</h1><p>vncserver和vncviewr选择有很多，我选择采用<br><code>vnc4server + VNC Viewer</code></p><ul><li>在服务器安装操作系统：Ubuntu16.04 Desktop</li><li>选择安装桌面和修改vnc相应配置，个人尝试安装了gnome和xface4</li></ul><h2 id="1-安装gnome"><a href="#1-安装gnome" class="headerlink" title="1.安装gnome"></a>1.安装gnome</h2><ul><li>执行<code>apt-get install vnc4server</code>，安装vnc server</li><li>执行<code>vncserver</code>，按照提示设置VNC访问时的密码</li><li>执行<code>apt-get install gnome-panel gnome-settings-daemon metacity nautilus gnome-terminal</code>，安装gnome窗口管理器</li><li>需要修改.vnc/xstartup配置文件。修改为下面的样子：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> XKL_XMODMAP_DISABLE=1</span><br><span class="line"><span class="built_in">unset</span> SESSION_MANAGER</span><br><span class="line"><span class="built_in">unset</span> DBUS_SESSION_BUS_ADDRESS</span><br><span class="line"></span><br><span class="line">gnome-panel &amp;</span><br><span class="line">gnome-settings-daemon &amp;</span><br><span class="line">metacity &amp;</span><br><span class="line">nautilus &amp;</span><br><span class="line">gnome-terminal &amp;</span><br><span class="line">vncconfig &amp;</span><br></pre></td></tr></table></figure><ul><li>执行<code>apt-get install vnc4server</code>，安装vnc server</li><li>执行<code>vncserver --geometry 1920×1080  :1</code>，再次启动vnc server，其中1920X1080是屏幕分辨率，可自行修改<br>thEast)</li><li>远程运行vnc的客户端（如：VNC Viewer）: IP地址+VNC端口（如：192.168.1.188：1）</li></ul><p>效果如下（桌面崩溃了，网上找的效果图）：<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://img.blog.csdn.net/20171127185425460?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2FuZ19zaGVuX3Rhbw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="崩溃的桌面" title="">                </div>                <div class="image-caption">崩溃的桌面</div>            </figure></p><h2 id="2-安装xfce4"><a href="#2-安装xfce4" class="headerlink" title="2.安装xfce4"></a>2.安装xfce4</h2><ul><li>执行<code>apt-get install vnc4server</code>，安装vnc server</li><li>执行<code>vncserver</code>，按照提示设置VNC访问时的密码</li><li>执行<code>sudo apt-get install xfce4</code>，安装xfce4桌面环境</li><li>需要修改.vnc/xstartup配置文件。修改为下面的样子：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="comment"># Uncomment the following two lines for normal desktop:</span></span><br><span class="line"><span class="comment"># unset SESSION_MANAGER</span></span><br><span class="line"><span class="comment"># exec /etc/X11/xinit/xinitrc</span></span><br><span class="line">[ -x /etc/vnc/xstartup ] &amp;&amp; <span class="built_in">exec</span> /etc/vnc/xstartup</span><br><span class="line">[ -r <span class="variable">$HOME</span>/.Xresources ] &amp;&amp; xrdb <span class="variable">$HOME</span>/.Xresources</span><br><span class="line">xsetroot -solid grey</span><br><span class="line">vncconfig -iconic &amp;</span><br><span class="line">x-terminal-emulator -geometry 80x24+10+10 -ls -title <span class="string">"<span class="variable">$VNCDESKTOP</span> Desktop"</span> &amp;</span><br><span class="line"><span class="comment">#x-window-manager &amp;</span></span><br><span class="line">sesion-manager &amp; xfdesktop &amp; xfce4-panel &amp;</span><br><span class="line">xfce4-menu-plugin &amp;</span><br><span class="line">xfsettingsd &amp;</span><br><span class="line">xfconfd &amp;</span><br><span class="line">xfwm4 &amp;</span><br></pre></td></tr></table></figure><ul><li>执行<code>sudo update-alternatives --config x-terminal-emulator</code>，选择“/usr/bin/xterm”项或者“/usr/bin/xfce4-terminal.wrapper”，配置模拟终端,否则登录后无法启动终端</li><li>执行<code>vncserver - -geometry 1920×1080  :1</code>，再次启动vnc server，其中1920X1080是屏幕分辨率，可自行修改</li><li>远程运行vnc的客户端（如：VNC Viewer）: IP地址+VNC端口（如：192.168.1.188：1）</li></ul><p>效果如下：<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://img.blog.csdn.net/20171127185748696?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2FuZ19zaGVuX3Rhbw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="">                </div>                <div class="image-caption">这里写图片描述</div>            </figure></p><h1 id="遇到问题"><a href="#遇到问题" class="headerlink" title="遇到问题"></a>遇到问题</h1><p>1安装gnome系统崩溃，再次登陆表现为：菜单无法显示，终端无法打开，新开用户可以重新打开终端，但是菜单任无法显示，所以采用xfce桌面。网上称vnc4server对gnome桌面支持有bug。</p><p><code>推荐直接使用安装xfce4并且修改相应配置</code></p><p>2 安装xfce后无法使用tab键在终端中自动补齐，原因是快捷键冲突。</p><p>解决方法：</p><ul><li>菜单栏 → 设置 → 窗口设置 。打开窗口设置对话框<br><img src="http://img.blog.csdn.net/20171127190313823?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2FuZ19zaGVuX3Rhbw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></li><li>在窗口管理器中选择快捷键选项卡（Key） → Switch window for same application</li><li>将冲突快捷键清空，关闭窗口管理器</li></ul><p>参考：</p><ul><li><p><a href="https://zhuanlan.zhihu.com/p/23325822" target="_blank" rel="noopener">在ubuntu16.04.1-desktop(amd64)上设置VNC</a></p></li><li><p><a href="http://blog.csdn.net/xiji321/article/details/78579622" target="_blank" rel="noopener">ubuntu16.04 vncserver配置</a></p></li><li><p><a href="http://blog.csdn.net/xuezhisdc/article/details/48662435" target="_blank" rel="noopener">在VNC中Xfce4中Tab键失效的解决方法</a></p><p>​</p></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;解决方案&quot;&gt;&lt;a href=&quot;#解决方案&quot; class=&quot;headerlink&quot; title=&quot;解决方案&quot;&gt;&lt;/a&gt;解决方案&lt;/h1&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:center&quot;&gt;序号&lt;/th&gt;
&lt;th st
      
    
    </summary>
    
      <category term="服务器运维" scheme="https://geniuslight.github.io/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%90%E7%BB%B4/"/>
    
    
      <category term="Linux" scheme="https://geniuslight.github.io/tags/Linux/"/>
    
      <category term="运维" scheme="https://geniuslight.github.io/tags/%E8%BF%90%E7%BB%B4/"/>
    
  </entry>
  
</feed>
